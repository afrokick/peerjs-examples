(window["webpackJsonppeerjs-examples"]=window["webpackJsonppeerjs-examples"]||[]).push([[0],{55:function(e,n,t){e.exports=t(67)},60:function(e,n,t){},61:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=61},66:function(e,n,t){},67:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(7),r=t.n(c),s=(t(60),t(29)),i=t(38),l=t(45),m=t(39),d=t(46),u=t(33),g=t(40),p=t(108),f=t(110),C=t(104),E=t(95),h=t(99),v=t(101),b=t(102),I=t(112),k=t(97),y=t(98),x=Object(E.a)({orangeAvatar:{margin:5,color:"#fff",backgroundColor:k.a[500]},purpleAvatar:{margin:5,color:"#fff",backgroundColor:y.a[500]}}),w=function(e){var n=e.isLocal,t=e.nickname,a=x(),c=n?"Me":t;return o.a.createElement(h.a,{className:n?a.orangeAvatar:a.purpleAvatar},c)},j=function(e){var n=e.message,t=(e.classes,n.nickname),a=n.text,c=n.ts,r=n.isLocal;return o.a.createElement(v.a,{alignItems:"flex-start"},o.a.createElement(b.a,null,o.a.createElement(w,{isLocal:r,nickname:t})),o.a.createElement(I.a,{primary:a,secondary:o.a.createElement(o.a.Fragment,null,c.toLocaleString())}))},O=t(103),S=Object(E.a)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}),D=function(e){var n=e.messages,t=S();return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Lets start conversation..."),o.a.createElement(O.a,{className:t.root},n.map(function(e){return o.a.createElement(j,{key:String(e.ts.getTime()),message:e,classes:t})})))},L=t(109),T=t(106),M=t(107),N=Object(E.a)(function(e){return{wrapper:{margin:e.spacing(1),padding:e.spacing(2),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginLeft:"-12px",marginTop:"-12px"}}}),A=function(e){var n=e.connected,t=e.connecting,a=e.myId,c=e.remoteId,r=e.onConnectClick,s=e.onMyIdChange,i=e.onRemoteIdChange,l=N();return o.a.createElement(C.a,null,o.a.createElement(f.a,{m:"5px"},o.a.createElement(L.a,{placeholder:"Your nickname",value:a,label:"Your nickname",required:!0,disabled:t||n,onChange:s}),o.a.createElement(L.a,{placeholder:"Remote nickname",value:c,label:"Remote nickname",required:!0,disabled:t||n,onChange:i})),!n&&o.a.createElement(f.a,{className:l.wrapper},o.a.createElement(T.a,{variant:"contained",onClick:r,disabled:t},"Connect"),t&&o.a.createElement(M.a,{size:24,className:l.buttonProgress})))},P=t(44),R=t(105),J=function(e){var n=e.onSendClick,t=Object(a.useState)(""),c=Object(P.a)(t,2),r=c[0],s=c[1];return o.a.createElement(R.a,{placeholder:"Enter text...",value:r,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),n(r),s(""))}})},F=function e(n){var t=n.nickname,a=n.text,o=n.ts,c=n.isLocal;Object(s.a)(this,e),this.nickname=t,this.text=a,this.ts=o,this.isLocal=c},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return Object(u.a)(Array(e)).map(function(e){return(~~(36*Math.random())).toString(36)}).join("")},q=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(l.a)(this,Object(m.a)(n).call(this,e))).onMyIdChange=function(e){var n=e.target;t.setState({myId:n.value})},t.onRemoteIdChange=function(e){var n=e.target;t.setState({remoteId:n.value})},t.onConnectClick=function(){console.log("start connecting..."),t.setState({connecting:!0}),t.peer=new g.peerjs.Peer(t.state.myId,{debug:3}),t.peer.on("open",t.onConnectedToPeerJS),t.peer.on("connection",t.onIncomingDataConnection)},t.onConnectedToPeerJS=function(){t.state.remoteId&&(t.dc=t.peer.connect(t.state.remoteId),t.subscribeToDCEvents())},t.subscribeToDCEvents=function(){t.dc.on("open",function(){console.log("DC opened!"),t.setState({connecting:!1,connected:!0})}),t.dc.on("close",function(){console.log("DC closed!")}),t.dc.on("data",function(e){console.log("DC data:".concat(e)),t.addMessage(new F({nickname:t.dc.peer,ts:new Date,text:e,isLocal:!1}))}),t.dc.on("error",function(e){console.error("DC error:".concat(e))})},t.onIncomingDataConnection=function(e){console.log("Incoming dc:",e),t.dc=e,t.setState({remoteId:e.peer}),t.subscribeToDCEvents()},t.onNewTextInputSend=function(e){t.addMessage(new F({nickname:t.state.myId,ts:new Date,text:e,isLocal:!0})),t.dc.send(e)},t.state={myId:"user_".concat(_()),remoteId:"",messages:[],connecting:!1,connected:!1,sending:!1},t.peer=null,t.dc=null,t}return Object(d.a)(n,e),Object(i.a)(n,[{key:"addMessage",value:function(e){this.setState({messages:[].concat(Object(u.a)(this.state.messages),[e])})}},{key:"render",value:function(){var e=this.state,n=e.myId,t=e.remoteId,a=e.connecting,c=e.connected,r=e.messages;return o.a.createElement(p.a,{maxWidth:"sm"},o.a.createElement(f.a,null,o.a.createElement(A,{myId:n,remoteId:t,connecting:a,connected:c,onConnectClick:this.onConnectClick,onMyIdChange:this.onMyIdChange,onRemoteIdChange:this.onRemoteIdChange})),c&&o.a.createElement(f.a,{marginTop:"10px"},o.a.createElement(C.a,null,o.a.createElement(f.a,{padding:"5px"},o.a.createElement(D,{messages:r})),o.a.createElement(f.a,{padding:"5px"},o.a.createElement(J,{onSendClick:this.onNewTextInputSend})))))}}]),n}(o.a.Component);t(66);r.a.render(o.a.createElement(function(){return o.a.createElement("div",{className:"App"},o.a.createElement(q,null))},null),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.73f06b43.chunk.js.map